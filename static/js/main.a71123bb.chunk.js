(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{10:function(e,t,n){e.exports={boardContainer:"Board_boardContainer__1LEFg",boardGrid:"Board_boardGrid__30AAE",boardGridCell:"Board_boardGridCell__2cENT",tilesContainer:"Board_tilesContainer__3TIBn",tileContainer:"Board_tileContainer__3YcLx",tile:"Board_tile__36kz5",newRandomTile:"Board_newRandomTile__3aOcI",newRandomTileAnimation:"Board_newRandomTileAnimation__1eu4J",newMergedTile:"Board_newMergedTile__2fYCj",newMergedTileAnimation:"Board_newMergedTileAnimation__1FEAj","tile-2":"Board_tile-2__1868c","tile-4":"Board_tile-4__2ZMie","tile-8":"Board_tile-8__TQ_WY","tile-16":"Board_tile-16__h7mTZ","tile-32":"Board_tile-32__3Ge3d","tile-64":"Board_tile-64__1QBuo","tile-128":"Board_tile-128__fVeou","tile-256":"Board_tile-256__1HYOa","tile-512":"Board_tile-512__1YoSF","tile-1024":"Board_tile-1024__3qOp-","tile-2048":"Board_tile-2048__3LhJo"}},12:function(e,t,n){e.exports={container:"Header_container__27QFJ",title:"Header_title__3_fub",gameInfo:"Header_gameInfo__3aUvJ",scoreContainer:"Header_scoreContainer__3bq5H",scoreLabel:"Header_scoreLabel__3uraT",scoreValue:"Header_scoreValue__2HLNR",newGameBtn:"Header_newGameBtn__1c5MY"}},14:function(e,t,n){e.exports={container:"EndGamePanel_container__F2q-c",endGamePanel:"EndGamePanel_endGamePanel__1vMAp",fadeInAnimation:"EndGamePanel_fadeInAnimation__3GGIs",panelBtn:"EndGamePanel_panelBtn__PTD2G"}},16:function(e,t,n){e.exports={container:"Game_container__39SqM",howToPlayText:"Game_howToPlayText__6SN9W",viewOnGithubLink:"Game_viewOnGithubLink__2drxN",positionRelative:"Game_positionRelative__29WxI",boldText:"Game_boldText__1PbJY"}},29:function(e,t,n){e.exports=n(43)},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(17),o=n.n(c),i=n(7),l=n(9),u=n(28),s=n(8),f="NEW_GAME",m="NEW_TILE",d="MOVE_TILES",b="MERGE_TILES",O={IN_PROGRESS:"IN_PROGRESS",VICTORY:"VICTORY",GAME_OVER:"GAME_OVER",IN_PROGRESS_AFTER_VICTORY:"IN_PROGRESS_AFTER_VICTORY"},p={UP:"UP",LEFT:"LEFT",DOWN:"DOWN",RIGHT:"RIGHT"},_={38:p.UP,37:p.LEFT,40:p.DOWN,39:p.RIGHT};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={gameState:O.IN_PROGRESS},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return w({},e,{gameState:O.IN_PROGRESS});case"KEEP_PLAYING":return w({},e,{gameState:O.IN_PROGRESS_AFTER_VICTORY});case"GAME_OVER":return w({},e,{gameState:O.GAME_OVER});case"VICTORY":return w({},e,{gameState:O.VICTORY});default:return e}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={grid:[],tilesMoving:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TILES_MOVING":return y({},e,{tilesMoving:t.payload});case"UPDATE_GRID":return y({},e,{grid:t.payload});default:return e}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={currentScore:0},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return T({},e,{currentScore:0});case"INCREMENT_SCORE":var n=e.currentScore+t.payload;return T({},e,{currentScore:n});default:return e}},S=Object(l.c)({game:g,tiles:G,score:N}),x=n(6),k=n.n(x),C=n(4),I=function(){return{type:m}},M=function(e){return{type:d,payload:e}},B=function(){return{type:b}},A=function(e){return{type:"UPDATE_GRID",payload:e}},V=function(e){return{type:"SET_TILES_MOVING",payload:e}},D=function(){return{type:f}},L=function(){return{type:"GAME_OVER"}},Y=function(){return{type:"VICTORY"}},W=function(){return{type:"KEEP_PLAYING"}},H=function(e){return{type:"INCREMENT_SCORE",payload:e}},F=n(13),U=n(25),J=n.n(U);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={UP:{row:-1,col:0},DOWN:{row:1,col:0},LEFT:{row:0,col:-1},RIGHT:{row:0,col:1}},Z=function(){for(var e=[],t=0;t<4;t+=1){for(var n=[],r=0;r<4;r+=1)n.push(null);e.push(n)}return e},z=function(e,t){for(var n=Z(),r=Q[t],a=!1,c=function(e,t){var r=!0;if(r=(r=(r=(r=r&&e.row>=0)&&e.col>=0)&&e.row<4)&&e.col<4){var a=n[e.row][e.col],c=null===a,o=a&&a.value===t,i=a&&!a.willMergeWith;r=r&&c||o&&i}return r},o=0;o<4;o+=1)for(var i=0;i<4;i+=1){var l=o,u=i;t===p.DOWN&&(l=4-o-1),t===p.RIGHT&&(u=4-i-1);var s=e[l][u];if(null!==s){var f=q({},s),m={row:s.row+r.row,col:s.col+r.col};for(f.newMerged=!1,f.newRandom=!1;c(m,f.value);)f.row=m.row,f.col=m.col,m.row+=r.row,m.col+=r.col,f.row===s.row&&f.col===s.col||(a=!0);null!==n[f.row][f.col]?n[f.row][f.col].willMergeWith=f:n[f.row][f.col]=f}}return{newGrid:n,validMove:a}},X=function(e){if(Object(F.flatten)(e).some((function(e){return null===e})))return!0;var t=!1;return Object(F.flatten)(e).forEach((function(n){var r=n.row,a=n.col,c=n.value;r+1<4&&e[r+1][a].value===c&&(t=!0),a+1<4&&e[r][a+1].value===c&&(t=!0)})),t},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Math.random()>.9?4:2,r=!!t,a=!t;return{id:J()(),value:t||n,row:e[0],col:e[1],newMerged:r,newRandom:a,willMergeWith:null}},ee=function(e){var t=function(e){var t=[];return e.forEach((function(e,n){e.forEach((function(e,r){e||t.push([n,r])}))})),t}(e);return t[Math.floor(Math.random()*t.length)]},te=function(e,t){return e.map((function(e,n){return n!==t.row?e:e.map((function(e,n){return n!==t.col?e:t}))}))},ne=function(e){return e.map((function(e){return e.map((function(e){if(e&&e.willMergeWith){var t=[e.row,e.col],n=2*e.value;return $(t,n)}return e}))}))},re=function(e,t){if(e!==O.IN_PROGRESS_AFTER_VICTORY)return Object(F.flatten)(t).filter((function(e){return e})).some((function(e){return 2048===e.value}))},ae=function(e){var t=Object(F.flatten)(e).filter((function(e){return null!==e})),n=0,r=!0,a=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;l.newMerged&&(n+=l.value)}}catch(u){a=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n},ce=k.a.mark(fe),oe=k.a.mark(me),ie=k.a.mark(de),le=k.a.mark(be),ue=k.a.mark(Oe),se=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function fe(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(){var t,n,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)((function(e){return e.tiles.grid}));case 2:if(!(t=e.sent).length){e.next=9;break}return n=ee(t),r=$(n),a=te(t,r),e.next=9,Object(C.b)(A(a));case 9:case"end":return e.stop()}}),e)},e=k.a.mark(t),n.next=4,Object(C.d)(m,t);case 4:case"end":return n.stop()}}),ce)}function me(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z(),e.next=3,Object(C.b)(A(t));case 3:return e.next=5,Object(C.b)(I());case 5:return e.next=7,Object(C.b)(I());case 7:case"end":return e.stop()}}),e)},e=k.a.mark(t),n.next=4,Object(C.d)(f,t);case 4:case"end":return n.stop()}}),oe)}function de(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(t){var n,r,a,c,o,i,l,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)((function(e){return e.tiles}));case 2:return n=e.sent,r=n.grid,a=n.tilesMoving,e.next=7,Object(C.c)((function(e){return e.game.gameState}));case 7:if(c=e.sent,o=z(r,t.payload),i=o.newGrid,l=o.validMove,u=c===O.VICTORY||c===O.GAME_OVER,!a&&!u){e.next=12;break}return e.abrupt("return");case 12:if(X(i)){e.next=17;break}return e.next=15,Object(C.b)(L());case 15:e.next=30;break;case 17:if(!l){e.next=30;break}return e.next=20,Object(C.b)(V(!0));case 20:return e.next=22,Object(C.b)(A(i));case 22:return e.next=24,se(150);case 24:return e.next=26,Object(C.b)(V(!1));case 26:return e.next=28,Object(C.b)(B());case 28:return e.next=30,Object(C.b)(I());case 30:case"end":return e.stop()}}),e)},e=k.a.mark(t),n.next=4,Object(C.d)(d,t);case 4:case"end":return n.stop()}}),ie)}function be(){var e,t;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(){var t,n,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)((function(e){return e.game.gameState}));case 2:return t=e.sent,e.next=5,Object(C.c)((function(e){return e.tiles.grid}));case 5:return n=e.sent,r=ne(n),a=ae(r),e.next=10,Object(C.b)(A(r));case 10:return e.next=12,Object(C.b)(H(a));case 12:if(!re(t,n)){e.next=15;break}return e.next=15,Object(C.b)(Y());case 15:case"end":return e.stop()}}),e)},e=k.a.mark(t),n.next=4,Object(C.d)(b,t);case 4:case"end":return n.stop()}}),le)}function Oe(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([me(),de(),be(),fe()]);case 2:case"end":return e.stop()}}),ue)}var pe=Object(u.a)(),_e=Object(l.e)(S,Object(l.d)(Object(l.a)(pe)));pe.run(Oe);var ve=_e,we=n(26),Ee=n(12),ge=n.n(Ee);var je=function(e){var t=e.score,n=e.onNewGameClick;return a.a.createElement("div",{className:ge.a.container},a.a.createElement("h1",{className:ge.a.title},"2048"),a.a.createElement("div",{className:ge.a.gameInfo},a.a.createElement("div",{className:ge.a.scoreContainer},a.a.createElement("div",{className:ge.a.scoreLabel},"Score"),a.a.createElement("div",{className:ge.a.scoreValue},t)),a.a.createElement("button",{className:ge.a.newGameBtn,onClick:n},"New Game")))};var ye=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.score.currentScore})),n=Object(r.useCallback)((function(){e(D())}),[e]);return a.a.createElement(je,{score:t,onNewGameClick:n})},he=n(27),Ge=n.n(he),Pe=n(10),Te=n.n(Pe),Re=function(){for(var e=[],t=0;t<16;t+=1)e.push(a.a.createElement("div",{key:t,className:Te.a.boardGridCell}));return a.a.createElement("div",{className:Te.a.boardGrid},e)},Ne=function(e){var t=e.tiles;return a.a.createElement("div",{className:Te.a.tilesContainer},t.map((function(e){var t,n={transform:"translate(".concat(85*e.col,"px, ").concat(85*e.row,"px)")},r=Ge()(Te.a.tile,(t={},Object(s.a)(t,Te.a.newRandomTile,e.newRandom),Object(s.a)(t,Te.a.newMergedTile,e.newMerged),Object(s.a)(t,Te.a["tile-".concat(e.value)],!0),t));return a.a.createElement("div",{key:e.id,className:Te.a.tileContainer,style:n},a.a.createElement("div",{className:r},e.value))})))};var Se=function(e){var t=e.tiles;return a.a.createElement("div",{className:Te.a.boardContainer},a.a.createElement(Re,null),a.a.createElement(Ne,{tiles:t}))},xe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){var t=[];return Object(F.flatten)(e.tiles.grid).forEach((function(e){e&&(t.push(e),e.willMergeWith&&t.push(e.willMergeWith))})),t.sort((function(e,t){return e.id>t.id?1:-1}))}));Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}));var n=function(t){var n=_[t.keyCode];n&&e(M(n))};return a.a.createElement(Se,{tiles:t})},ke=n(14),Ce=n.n(ke),Ie=function(e){return a.a.createElement("div",{className:Ce.a.endGamePanel},a.a.createElement("h1",null,"GAME OVER!"),a.a.createElement("button",{className:Ce.a.panelBtn,onClick:e.onNewGameClick},"Try Again"))},Me=function(e){return a.a.createElement("div",{className:Ce.a.endGamePanel},a.a.createElement("h1",null,"YOU WIN!"),a.a.createElement("div",null,a.a.createElement("button",{className:Ce.a.panelBtn,onClick:e.onKeepPlayingClick},"Keep Playing"),a.a.createElement("button",{className:Ce.a.panelBtn,onClick:e.onNewGameClick},"Try Again")))};var Be=function(e){var t=e.onNewGameClick,n=e.onKeepPlayingClick,r=null;return e.gameState===O.GAME_OVER?r=a.a.createElement(Ie,{onNewGameClick:t}):e.gameState===O.VICTORY&&(r=a.a.createElement(Me,{onNewGameClick:t,onKeepPlayingClick:n})),a.a.createElement("div",{className:Ce.a.container},r)};var Ae=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.game.gameState})),n=Object(r.useCallback)((function(){e(D())}),[e]),c=Object(r.useCallback)((function(){e(W())}),[e]);return a.a.createElement(Be,{gameState:t,onNewGameClick:n,onKeepPlayingClick:c})},Ve=n(16),De=n.n(Ve);var Le=function(e){var t=e.gameState!==O.PLAYING;return a.a.createElement("div",{className:De.a.container},a.a.createElement(ye,null),a.a.createElement("div",{className:De.a.positionRelative},a.a.createElement(xe,null),t&&a.a.createElement(Ae,null)),a.a.createElement("p",{className:De.a.howToPlayText},a.a.createElement("span",{className:De.a.boldText},"HOW TO PLAY"),": Use your arrow keys or swipe to move the tiles. When two tiles with the same number touch, they merge into one!"),a.a.createElement("div",{className:De.a.viewOnGithubLink},a.a.createElement("a",{href:"https://github.com/rbika/2048",target:"_blank"},"View on Github")))};var Ye=function(){var e=Object(i.c)((function(e){return e.game.gameState})),t=Object(i.b)();return Object(r.useEffect)((function(){t(D())}),[]),a.a.createElement(we.a,{onSwiped:function(e){var n=p[e.dir.toUpperCase()];n&&t(M(n))}},a.a.createElement(Le,{gameState:e}))};n(42);o.a.render(a.a.createElement(i.a,{store:ve},a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ye,null))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a71123bb.chunk.js.map